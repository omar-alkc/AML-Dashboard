<div class="kpi-grid" *ngIf="!loading">
  <div class="kpi-item" *ngFor="let kpi of kpis">
    <nb-card [ngClass]="'kpi-card status-' + kpi.status">
      <nb-card-body class="d-flex align-items-center">
        <div class="icon-container">
          <nb-icon [icon]="kpi.icon" [status]="kpi.status"></nb-icon>
        </div>
        <div class="info">
          <div class="title">{{ kpi.title }}</div>
          <div class="value">{{ kpi.value | number }}</div>
          <div class="comparison" *ngIf="kpi.comparison">
            <span
              class="comparison-text"
              [class.positive]="kpi.comparison.isPositive && !kpi.comparison.isNeutral"
              [class.negative]="!kpi.comparison.isPositive && !kpi.comparison.isNeutral"
              [class.neutral]="kpi.comparison.isNeutral">
              {{ kpi.comparison.value >= 0 ? '+' : '' }}{{ kpi.comparison.value | number:'1.1-1' }}{{ kpi.comparison.isPercentage ? '%' : '' }}
            </span>
          </div>
        </div>
      </nb-card-body>
    </nb-card>
  </div>
</div>

<div class="loading-container" *ngIf="loading">
  <nb-spinner size="medium"></nb-spinner>
</div>
